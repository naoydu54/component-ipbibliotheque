/*!
 * EventEmitter v5.2.1 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */
;(function(w){function d(){}var m=d.prototype;var y=w.EventEmitter;function i(A,B){var z=A.length;while(z--){if(A[z].listener===B){return z}}return -1}function k(z){return function A(){return this[z].apply(this,arguments)}}m.getListeners=function u(z){var C=this._getEvents();var A;var B;if(z instanceof RegExp){A={};for(B in C){if(C.hasOwnProperty(B)&&z.test(B)){A[B]=C[B]}}}else{A=C[z]||(C[z]=[])}return A};m.flattenListeners=function s(B){var z=[];var A;for(A=0;A<B.length;A+=1){z.push(B[A].listener)}return z};m.getListenersAsObject=function f(z){var B=this.getListeners(z);var A;if(B instanceof Array){A={};A[z]=B}return A||B};function c(z){if(typeof z==="function"||z instanceof RegExp){return true}else{if(z&&typeof z==="object"){return c(z.listener)}else{return false}}}m.addListener=function g(z,C){if(!c(C)){throw new TypeError("listener must be a function")}var B=this.getListenersAsObject(z);var D=typeof C==="object";var A;for(A in B){if(B.hasOwnProperty(A)&&i(B[A],C)===-1){B[A].push(D?C:{listener:C,once:false})}}return this};m.on=k("addListener");m.addOnceListener=function a(z,A){return this.addListener(z,{listener:A,once:true})};m.once=k("addOnceListener");m.defineEvent=function q(z){this.getListeners(z);return this};m.defineEvents=function r(z){for(var A=0;A<z.length;A+=1){this.defineEvent(z[A])}return this};m.removeListener=function b(z,D){var C=this.getListenersAsObject(z);var A;var B;for(B in C){if(C.hasOwnProperty(B)){A=i(C[B],D);if(A!==-1){C[B].splice(A,1)}}}return this};m.off=k("removeListener");m.addListeners=function n(z,A){return this.manipulateListeners(false,z,A)};m.removeListeners=function t(z,A){return this.manipulateListeners(true,z,A)};m.manipulateListeners=function h(A,B,D){var C;var E;var F=A?this.removeListener:this.addListener;var z=A?this.removeListeners:this.addListeners;if(typeof B==="object"&&!(B instanceof RegExp)){for(C in B){if(B.hasOwnProperty(C)&&(E=B[C])){if(typeof E==="function"){F.call(this,C,E)}else{z.call(this,C,E)}}}}else{C=D.length;while(C--){F.call(this,B,D[C])}}return this};m.removeEvent=function p(z){var C=typeof z;var B=this._getEvents();var A;if(C==="string"){delete B[z]}else{if(z instanceof RegExp){for(A in B){if(B.hasOwnProperty(A)&&z.test(A)){delete B[A]}}}else{delete this._events}}return this};m.removeAllListeners=k("removeEvent");m.emitEvent=function v(z,B){var F=this.getListenersAsObject(z);var E;var G;var D;var C;var A;for(C in F){if(F.hasOwnProperty(C)){E=F[C].slice(0);for(D=0;D<E.length;D++){G=E[D];if(G.once===true){this.removeListener(z,G.listener)}A=G.listener.apply(this,B||[]);if(A===this._getOnceReturnValue()){this.removeListener(z,G.listener)}}}}return this};m.trigger=k("emitEvent");m.emit=function l(z){var A=Array.prototype.slice.call(arguments,1);return this.emitEvent(z,A)};m.setOnceReturnValue=function j(z){this._onceReturnValue=z;return this};m._getOnceReturnValue=function o(){if(this.hasOwnProperty("_onceReturnValue")){return this._onceReturnValue}else{return true}};m._getEvents=function e(){return this._events||(this._events={})};d.noConflict=function x(){w.EventEmitter=y;return d};if(typeof define==="function"&&define.amd){define(function(){return d})}else{if(typeof module==="object"&&module.exports){module.exports=d}else{w.EventEmitter=d}}}(this||{}));