var fs=require("fs");var path=require("path");var _files=path.join(__dirname,"_files");function getContents(a,c){try{return fs.readFileSync(path.join(_files,a+"."+c),"utf8")}catch(b){return null}}function getView(a){var b=getContents(a,"js");if(!b){throw new Error('Cannot find view for test "'+a+'"')}return b}function getPartial(a){try{return getContents(a,"partial")}catch(b){}}var testToRun=process.env.TEST;var testNames;if(testToRun){testNames=testToRun.split(",")}else{testNames=fs.readdirSync(_files).filter(function(a){return(/\.js$/).test(a)}).map(function(a){return path.basename(a).replace(/\.js$/,"")})}function getTest(a){return{name:a,view:getView(a),template:getContents(a,"mustache"),partial:getPartial(a),expect:getContents(a,"txt")}}exports.getTests=function getTests(){return testNames.map(getTest)};